// Generated by CoffeeScript 1.7.1
(function() {
  var initCarousel;

  initCarousel = function() {
    return $.getScript("http://static.arts.ac.uk/assets/js/jquery.bxslider.min.js", function() {
      return $.each($(".js-carousel"), function() {
        var _controlsOpt, _itemMargin, _itemMinSlides, _itemWidth, _pagerOpt, _this, _wrapper;
        _this = $(this);
        _wrapper = _this.closest(".bx-wrapper");
        _itemWidth = (_this.data("carousel-item-width") > 0 ? _this.data("carousel-item-width") : 0);
        _itemMinSlides = (_this.data("carousel-min-slides") > 0 ? _this.data("carousel-min-slides") : 0);
        _itemMargin = (_this.data("carousel-item-margin") > 0 ? _this.data("carousel-item-margin") : 0);
        _controlsOpt = true;
        _controlsOpt = _this.data("controls");
        _pagerOpt = (_this.data("pager") ? _this.data("pager") : false);
        return _this.bxSlider({
          slideWidth: _itemWidth,
          minSlides: _itemMinSlides,
          maxSlides: 10,
          slideMargin: _itemMargin,
          moveSlides: 1,
          controls: _controlsOpt,
          captions: true,
          pager: _pagerOpt,
          onSliderLoad: function(currentIndex) {
            if (_this.data("counter")) {
              return $(_this).closest(".bx-wrapper").find(".bx-controls").prepend("<div class=\"bx-counter\"><span class=\"bx-index\">" + (currentIndex + 1) + "</span>/<span class=\"bx-total\">" + _this.getSlideCount() + "</span></div>");
            }
          },
          onSlideAfter: function($slideElement, oldIndex, newIndex) {
            if (_this.data("counter")) {
              return $(_this).closest(".bx-wrapper").find(".bx-index").text(newIndex + 1);
            }
          }
        });
      });
    });
  };

  $(document).ready(function() {
    if ($(".js-carousel").length > 0) {
      return initCarousel();
    }
  });

}).call(this);
