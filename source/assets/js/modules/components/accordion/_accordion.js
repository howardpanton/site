// Generated by CoffeeScript 1.7.1

/*
		-------------------------------------------------------------
				initAccordion()
				Load accordion script and handle clicks
				Updated Howard Panton : 15th August 2014
		-------------------------------------------------------------
 */

(function() {
  var initAccordion;

  initAccordion = function() {
    $(function($) {
      var allAccordionItems, allAccordions;
      allAccordions = $(".accordion .accordion__content");
      allAccordionItems = $(".accordion .accordion__heading");
      $(".accordion__heading").click(function() {
        console.log($(this));
        if ($(this).hasClass("open")) {
          $(this).removeClass("open");
          $(this).parent().next().slideUp("fast", "linear");
        } else {
          allAccordions.slideUp("fast", "linear");
          allAccordionItems.removeClass("open");
          $(this).addClass("open");
          $(this).parent().next().slideDown("fast", function() {
            $("html:not(:animated), body:not(:animated)").animate({
              scrollTop: $(this).offset().top - 60
            }, "slow");
          });
          false;
        }
      });
    });
    return $(function($) {
      var allAccordionItems, allAccordions;
      allAccordions = $(".accordion .accordion__content");
      allAccordionItems = $(".accordion .accordion__heading");
      return $(".accordion__heading").keyup(function(e) {
        console.log($(this));
        if (e.keyCode === 13) {
          if ($(this).hasClass("open")) {
            $(this).removeClass("open");
            $(this).parent().next().slideUp("fast", "linear");
          } else {
            allAccordions.slideUp("fast", "linear");
            allAccordionItems.removeClass("open");
            $(this).addClass("open");
            $(this).parent().next().slideDown("fast", function() {
              $("html:not(:animated), body:not(:animated)").animate({
                scrollTop: $(this).offset().top - 60
              }, "slow");
            });
            false;
          }
          return;
        }
      });
    });
  };

  $(document).ready(function() {
    if ($(".accordion").length > 0) {
      return initAccordion();
    }
  });

}).call(this);
